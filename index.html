<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ray Vault Clicker</title>
    <script src="https://telegram.org"></script>
    <style>
        :root {
            --main-gold: #f3ba2f;
            --bg-dark: #0f0f0f;
            --card-bg: #1e1e1e;
        }
        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            touch-action: manipulation;
        }
        .header {
            margin-top: 30px;
            text-align: center;
        }
        .balance {
            font-size: 50px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 0 20px rgba(243, 186, 47, 0.4);
        }
        .ray-symbol { color: var(--main-gold); }
        
        .rank-badge {
            background: var(--card-bg);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            border: 1px solid #333;
            margin-top: 10px;
            color: #aaa;
        }

        .clicker-zone {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100%;
        }

        /* –¢–æ—Ç —Å–∞–º—ã–π –°–ï–ô–§ */
        .vault-obj {
            width: 240px;
            height: 240px;
            background: linear-gradient(145deg, #2a2a2a, #111);
            border-radius: 40px;
            border: 6px solid #444;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6), inset 0 0 20px rgba(243, 186, 47, 0.05);
            transition: transform 0.05s;
            cursor: pointer;
        }
        .vault-obj::after {
            content: 'üîí'; /* –ò–∫–æ–Ω–∫–∞ –∑–∞–º–∫–∞ */
            position: absolute;
            font-size: 40px;
            right: 40px;
        }
        .vault-obj:active { transform: scale(0.92); }

        .energy-section {
            width: 90%;
            margin-bottom: 25px;
        }
        .energy-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .bar {
            width: 100%;
            height: 14px;
            background: #222;
            border-radius: 10px;
            border: 1px solid #333;
            overflow: hidden;
        }
        .fill {
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, var(--main-gold), #ff8c00);
            transition: width 0.1s;
        }

        .footer-menu {
            display: flex;
            width: 100%;
            background: var(--card-bg);
            padding: 15px 0;
            justify-content: space-around;
            border-top: 1px solid #333;
        }
        .menu-item { font-size: 12px; text-align: center; opacity: 0.6; }
        .menu-item.active { opacity: 1; color: var(--main-gold); }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞ */
        .plus-ray {
            position: absolute;
            color: var(--main-gold);
            font-weight: bold;
            font-size: 28px;
            pointer-events: none;
            animation: floatUp 0.6s ease-out forwards;
        }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-120px); opacity: 0; }
        }

        /* –ó–∞–≥–ª—É—à–∫–∞ –ø–æ–¥ –†–ï–ö–õ–ê–ú–£ */
        .ad-banner {
            width: 90%;
            height: 60px;
            background: #252525;
            margin-bottom: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
            font-size: 12px;
            border: 1px dashed #444;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="balance">
            <span class="ray-symbol">RAY</span>
            <span id="coins">0</span>
        </div>
        <div class="rank-badge" id="rank">Bronze Newbie</div>
    </div>

    <div class="clicker-zone">
        <div class="vault-obj" id="clicker">üóÑÔ∏è</div>
    </div>

    <!-- –†–µ–∫–ª–∞–º–Ω—ã–π –±–ª–æ–∫ (—Å—é–¥–∞ –ø–æ—Ç–æ–º –≤—Å—Ç–∞–≤–∏–º –∫–æ–¥ AdsGram) -->
    <div class="ad-banner" onclick="showAd()">–†–ï–ö–õ–ê–ú–ù–´–ô –ë–õ–û–ö (–°–º–æ—Ç—Ä–µ—Ç—å –∑–∞ +500 RAY)</div>

    <div class="energy-section">
        <div class="energy-info">
            <span>‚ö° <span id="energy-val">1000</span></span>
            <span>Limit: 1000</span>
        </div>
        <div class="bar"><div class="fill" id="energy-bar"></div></div>
    </div>

    <div class="footer-menu">
        <div class="menu-item active">üí∞<br>Clicker</div>
        <div class="menu-item">üöÄ<br>Boosts</div>
        <div class="menu-item" onclick="Telegram.WebApp.showAlert('–†–µ—Ñ–µ—Ä–∞–ª—ã: —Å–∫–æ—Ä–æ!')">üë•<br>Friends</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = parseInt(localStorage.getItem('ray_coins')) || 0;
        let energy = 1000;
        let lastClickTime = 0;

        const coinsEl = document.getElementById('coins');
        const energyEl = document.getElementById('energy-val');
        const energyBar = document.getElementById('energy-bar');
        const clickBtn = document.getElementById('clicker');

        function updateDisplay() {
            coinsEl.innerText = coins.toLocaleString();
            energyEl.innerText = energy;
            energyBar.style.width = (energy / 10) + '%';
            localStorage.setItem('ray_coins', coins);
            
            if(coins > 1000) document.getElementById('rank').innerText = "Ray Farmer";
            if(coins > 10000) document.getElementById('rank').innerText = "Safe Master";
        }

        // –ö–õ–ò–ö
        clickBtn.addEventListener('touchstart', (e) => {
            const now = Date.now();
            if (now - lastClickTime < 30) return; // –ó–∞—â–∏—Ç–∞ –æ—Ç –ª—é—Ç—ã—Ö –∫–ª–∏–∫–µ—Ä–æ–≤
            lastClickTime = now;

            if (energy > 0) {
                coins += 1;
                energy -= 1;
                
                // –≠—Ñ—Ñ–µ–∫—Ç—ã
                tg.HapticFeedback.impactOccurred('medium');
                createEffect(e.touches[0].clientX, e.touches[0].clientY);
                updateDisplay();
            } else {
                tg.HapticFeedback.notificationOccurred('error');
            }
        });

        function createEffect(x, y) {
            const el = document.createElement('div');
            el.className = 'plus-ray';
            el.innerText = '+1';
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 600);
        }

        // –†–µ–≥–µ–Ω —ç–Ω–µ—Ä–≥–∏–∏
        setInterval(() => {
            if (energy < 1000) {
                energy += 1;
                updateDisplay();
            }
        }, 1500);

        function showAd() {
            tg.showConfirm("–•–æ—á–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É –∏ –ø–æ–ª—É—á–∏—Ç—å 500 RAY?", (ok) => {
                if(ok) {
                    tg.showAlert("–†–µ–∫–ª–∞–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è... (–¢—É—Ç –±—É–¥–µ—Ç –∫–æ–¥ AdsGram)");
                    // –°—é–¥–∞ –≤—Å—Ç–∞–≤–∏–º —Å–∫—Ä–∏–ø—Ç —Ä–µ–∫–ª–∞–º—ã –ø–æ–∑–∂–µ
                }
            });
        }

        updateDisplay();
    </script>
</body>
</html>

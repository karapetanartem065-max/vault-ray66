<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VAULT RAY - OFFICIAL APP</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #f3ba2f;
            --bg: #0b0e11;
            --card: #1c2127;
            --text: #ffffff;
            --subtext: #848e9c;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        .header-stats {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 10px; padding: 15px;
        }
        .stat-box {
            background: var(--card); border-radius: 12px;
            padding: 10px; text-align: center; border: 1px solid #2b3139;
        }
        .stat-label { font-size: 11px; color: var(--subtext); }
        .stat-value { font-size: 15px; font-weight: bold; color: var(--primary); }

        .view { display: none; flex-direction: column; align-items: center; height: 100%; padding: 20px 15px 100px; }
        .view.active { display: flex; }

        .balance-value { font-size: 50px; font-weight: 900; margin: 20px 0; }
        
        .clicker-btn {
            width: 260px; height: 260px;
            background: radial-gradient(circle, #2b3139 0%, #000 100%);
            border-radius: 50%; border: 8px solid #333;
            display: flex; align-items: center; justify-content: center;
            font-size: 110px; box-shadow: 0 0 40px rgba(0,0,0,0.5);
            transition: transform 0.05s;
        }
        .clicker-btn:active { transform: scale(0.94); }

        .sub-section {
            width: 100%; margin-top: 25px;
            background: #1e2329; border: 1px solid #333;
            padding: 15px; border-radius: 15px; text-align: center;
        }
        .btn-sub {
            background: var(--primary); color: black; border: none;
            width: 100%; padding: 12px; border-radius: 10px;
            font-weight: bold; margin-top: 10px; cursor: pointer;
        }
        .btn-check {
            background: transparent; color: var(--primary); border: 1px solid var(--primary);
            width: 100%; padding: 10px; border-radius: 10px;
            margin-top: 8px; font-size: 13px;
        }

        .nav-bar {
            position: fixed; bottom: 0; width: 100%;
            display: grid; grid-template-columns: repeat(5, 1fr);
            background: #181c20; padding: 10px 0; border-top: 1px solid #2b3139;
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; font-size: 10px; color: var(--subtext); }
        .nav-item.active { color: var(--primary); }
    </style>
</head>
<body>

    <div class="header-stats">
        <div class="stat-box">
            <div class="stat-label">Profit per hour</div>
            <div class="stat-value" id="pph-val">+0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Energy</div>
            <div class="stat-value" id="energy-val">2000/2000</div>
        </div>
    </div>

    <div id="view-home" class="view active">
        <div class="balance-value">üí∞ <span id="balance">0</span></div>
        <div class="clicker-btn" id="vault">üè¶</div>
        
        <div class="sub-section" id="sub-block">
            <div style="font-size: 14px; font-weight: bold;">‚ö° Low Energy?</div>
            <div style="font-size: 11px; color: var(--subtext);">Join our channel for a massive energy boost!</div>
            <button class="btn-sub" onclick="openChannel()">üîó JOIN @vault_ray</button>
            <button class="btn-check" id="check-btn" style="display:none;" onclick="checkSubscription()">‚úÖ I HAVE SUBSCRIBED</button>
            </div>
    </div>

    <!-- –ó–∞–≥–ª—É—à–∫–∏ -->
    <div id="view-mine" class="view"><h2>Mining Shop</h2><p>Upgrade your income!</p></div>
    <div id="view-top" class="view"><h2>World Ranking</h2><p>Top 50 Players</p></div>
    <div id="view-friends" class="view"><h2>Friends</h2><p>Invite for bonuses</p></div>
    <div id="view-airdrop" class="view"><h2>Airdrop</h2><p>Tasks & Listing</p></div>

    <nav class="nav-bar">
        <div class="nav-item active" onclick="tab('home', this)">üè†<br>Home</div>
        <div class="nav-item" onclick="tab('mine', this)">‚õèÔ∏è<br>Mine</div>
        <div class="nav-item" onclick="tab('top', this)">üèÜ<br>Top</div>
        <div class="nav-item" onclick="tab('friends', this)">üë•<br>Friends</div>
        <div class="nav-item" onclick="tab('airdrop', this)">üí∞<br>Airdrop</div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const CHANNEL_URL = "https://t.me/vault_ray"; 

        let state = {
            balance: parseFloat(localStorage.getItem('ray_bal')) || 0,
            pph: parseInt(localStorage.getItem('ray_pph')) || 0,
            energy: 2000,
            maxEnergy: 2000,
            lastSubClaim: localStorage.getItem('last_sub_claim') || 0
        };

        function update() {
            document.getElementById('balance').innerText = Math.floor(state.balance).toLocaleString();
            document.getElementById('pph-val').innerText = '+' + state.pph;
            document.getElementById('energy-val').innerText = ${Math.floor(state.energy)}/${state.maxEnergy};
            localStorage.setItem('ray_bal', state.balance);
        }

        document.getElementById('vault').addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (state.energy >= 1) {
                state.balance += 1;
                state.energy -= 1;
                tg.HapticFeedback.impactOccurred('light');
                update();
            } else {
                tg.showAlert("No energy! Join channel for bonus.");
            }
        });

        // –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ä–µ–≥–µ–Ω: 2000 –∑–∞ —á–∞—Å
        setInterval(() => {
            if (state.energy < state.maxEnergy) {
                state.energy = Math.min(state.maxEnergy, state.energy + 0.55);
                update();
            }
            state.balance += (state.pph / 3600);
            update();
        }, 1000);

        function openChannel() {
            tg.openTelegramLink(CHANNEL_URL);
            document.getElementById('check-btn').style.display = "block";
        }

        function checkSubscription() {
            const now = Date.now();
            if (now - state.lastSubClaim < 8 * 60 * 60 * 1000) {
                tg.showAlert("Bonus already claimed! Wait a few hours.");
                return;
            }

            tg.showConfirm("Did you join @vault_ray?", (ok) => {
                if(ok) {
                    state.energy = Math.min(state.maxEnergy, state.energy + 1000);
                    state.lastSubClaim = Date.now();
                    localStorage.setItem('last_sub_claim', state.lastSubClaim);
                    tg.showAlert("Energy Refilled! ‚ö°");
                    document.getElementById('check-btn').style.display = "none";
                    update();
                }
            });
        }

        function tab(id, el) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('view-'+id).classList.add('active');
            el.classList.add('active');
        }

        update();
    </script>
</body>
</html>
